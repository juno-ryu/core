# `core/shared/service` 코드 분석 보고서

`core/shared/service` 디렉토리는 애플리케이션의 **백엔드 API 통신 계층**을 추상화하고, 데이터의 흐름을 타입-안전하고 일관되게 관리하기 위해 설계되었습니다. 개발자는 명확한 관심사 분리(Separation of Concerns) 원칙에 따라 코드를 구조화했으며, 주된 목적은 다음과 같습니다.

1.  **API 통신의 중앙화 및 추상화**
2.  **데이터 흐름의 타입 안정성 극대화**
3.  **재사용성 및 유지보수성 향상**

### 1. 디렉토리 구조와 역할

이 디렉토리는 API 통신 과정을 크게 **`api`**, **`input`**, **`output`**, **`enum`** 네 가지 역할로 명확하게 분리하여 책임과 역할을 분명히 하고 있습니다.

-   **`api/`**: 실제 API 요청 및 응답 처리를 담당하는 핵심 로직이 위치합니다.
    -   `api.service.ts`: `fetch`를 래핑하여 API 요청을 보내는 기본 클래스 또는 함수가 있을 것으로 추정됩니다. 요청 헤더, 에러 핸들링, 인증 토큰 관리 등 공통 로직을 처리합니다.
    -   `service/*.service.ts`: `deepl-translate.service.ts`와 같이 특정 도메인(번역, 본인인증 등)에 특화된 API 통신 로직을 캡슐화한 서비스 클래스들입니다. 이를 통해 각 API의 세부 구현을 다른 비즈니스 로직과 분리합니다.
    -   `consts/`: `SUCCESS_CODE`, `API_URL` 등 API 통신에 사용되는 상수를 정의하여 관리합니다.
    -   `type/`: 특정 API 서비스에서만 사용되는 고유한 타입(예: 다날 본인인증)을 정의합니다.

-   **`input/`**: API를 **요청(Request)**할 때 사용되는 데이터의 타입을 정의합니다.
    -   `common/`: `pageable.ts`, `sort.ts`와 같이 여러 API에서 공통으로 사용되는 페이지네이션, 정렬 관련 요청 데이터 타입을 정의합니다.
    -   이는 백엔드 API의 DTO(Data Transfer Object)와 1:1로 매칭될 가능성이 높으며, 프론트엔드에서 백엔드로 데이터를 보낼 때의 데이터 구조를 강제하여 안정성을 확보합니다.

-   **`output/`**: API로부터 **응답(Response)**받은 데이터의 타입을 정의합니다.
    -   `common/`: `pagination-output.ts`와 같이 공통적인 응답 데이터 구조(페이지 정보 등)를 정의합니다.
    -   `*.output.ts`: 특정 API가 반환하는 데이터의 타입을 명시적으로 정의합니다. 이를 통해 `fetch` 응답으로 받은 `any` 타입의 데이터를 명확한 구조를 가진 객체로 변환하여, 이후의 비즈니스 로직에서 안전하게 사용할 수 있도록 보장합니다.

-   **`enum/`**: 애플리케이션 전반에서 사용되는 열거형(Enum) 타입을 정의합니다.
    -   `country-code.ts`, `payment-method.ts` 등, API 요청/응답뿐만 아니라 프론트엔드 비즈니스 로직 전반에서 사용되는, 선택지가 정해져 있는 값들을 상수로 관리합니다.
    -   이는 단순 문자열 리터럴(`'KR'`, `'USD'`)의 사용을 방지하고, 허용된 값의 목록을 중앙에서 관리하여 오타로 인한 버그를 원천 차단하고 코드의 가독성을 높입니다.

### 2. 개발자의 의도 및 목적

이러한 구조를 통해 개발자는 다음과 같은 목적을 달성하고자 했습니다.

-   **관심사의 명확한 분리:** 실제 API 통신 로직, 요청 데이터 구조, 응답 데이터 구조, 공통 상수를 각각 다른 디렉토리와 파일로 분리하여 코드의 복잡도를 낮추고 유지보수를 용이하게 만들었습니다.
-   **타입-안전한 데이터 흐름:** `input`과 `output` 타입을 통해 API 통신의 모든 단계에서 데이터 구조를 강제합니다. 이는 `any` 타입의 사용을 최소화하고, API 명세가 변경되었을 때 타입 에러를 통해 빠르게 문제를 감지할 수 있게 해주는 매우 중요한 역할을 합니다.
-   **코드의 재사용성:** 페이지네이션, 정렬 등 공통적으로 사용되는 데이터 타입을 `common` 디렉토리에서 관리하여 여러 곳에서 재사용할 수 있도록 했습니다. 또한, `api.service.ts`를 통해 `fetch` 로직을 중앙에서 관리함으로써 중복 코드를 줄였습니다.
-   **API 명세의 코드화:** `input`, `output`, `enum` 디렉토리의 타입 정의들은 그 자체로 프론트엔드 관점에서의 "API 명세서" 역할을 합니다. 개발자는 이 타입들만 보고도 해당 API가 어떤 데이터를 받고 어떤 데이터를 반환하는지 명확하게 파악할 수 있습니다.

### 결론

`core/shared/service` 디렉토리는 현대적인 프론트엔드 애플리케이션에서 API 통신을 얼마나 체계적이고 안정적으로 관리해야 하는지를 보여주는 훌륭한 예시입니다. 개발자는 **명확한 디렉토리 구조**와 **엄격한 타입 정의**를 통해, 복잡할 수 있는 비동기 통신 로직을 예측 가능하고 유지보수하기 쉬운 코드로 구현했습니다. 이는 프로젝트의 전체적인 안정성과 생산성을 높이는 데 크게 기여합니다.
